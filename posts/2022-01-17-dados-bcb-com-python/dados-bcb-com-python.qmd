---
title: "Obtendo Dados do BCB com Python"
description: |
  Obter os dados para an√°lise de forma simples √© fundamental e necess√°rio.
preview: expectativas.png
author:
  - name: Wilson Freitas
    url: {}
date: 2022-01-17
categories:
  - Python
  - bcb
  - opendata
execute: 
  freeze: auto
---


Obter os dados para an√°lise de forma simples √© fundamental e necess√°rio.

Depois de passar alguns anos mantendo o pacote {rbcb} que faz a integra√ß√£o do R com as APIs de dados abertos do Banco Central, decidi fazer o port para Python.

Em parte porque o PyPI (Python Package Index - reposit√≥rio de pacotes do Python) √© bem menos burocr√°tico que o CRAN (reposit√≥rio de pacote do R), mas nos √∫ltimos anos tenho mexido mais com Python e fazia sentido portar algumas ferramentas.

O pacote {python-bcb} √© a contraparte em Python do pacote {rbcb} do R.

S√≥ que acabou ficando maior, n√£o por causa do Python, mas por que eu estava com tempo e paci√™ncia e acabei implementando parte da especifica√ß√£o OData. Isso permite de forma bem simples integrar diversas APIs do Banco Central que implementam essa especifica√ß√£o. Na minha √∫ltima contagem tinha 39 APIs nessa estrutura.

O pacote {python-bcb} traz as seguintes APIs:

- SGS
- S√©ries de Moedas do Conversor de Moedas do Banco Central
- Expectativas do FOCUS
- Boletins da PTAX (abertura, 3 intradi√°rios, fechamento)
- Dados selecionados de institui√ß√µes financeiras (IFDATA)

Agora o que d√° mais trabalho ao fazer a integra√ß√£o de uma API √© escrever a documenta√ß√£oüòâ dado que as APIs n√£o s√£o padronizadas.

Vou comunicando aqui na medida que novas APIs forem sendo integradas.

Obviamente espero todo o tipo de coment√°rios e sugest√µes.

Documenta√ß√£o do projeto: <https://wilsonfreitas.github.io/python-bcb/index.html>

Link do projeto: <https://github.com/wilsonfreitas/python-bcb>

No c√≥digo abaixo trago um exemplo que como utilizar a API de Expectativas do FOCUS para obter um DataFrame das expectativas de IPCA de 2021 ao longo de 2021.

```{python}
from bcb import Expectativas

em = Expectativas()
ep = em.get_endpoint("ExpectativasMercadoAnuais")

df_ipca_2021 = (
    ep.query()
      .filter(ep.Indicador == "IPCA")
      .filter(ep.Data >= "2021-01-01", ep.Data <= "2021-12-31")
      .filter(ep.DataReferencia == "2021", ep.baseCalculo == 1)
      .orderby(ep.Data.asc())
      .select(ep.Data, ep.Media, ep.Mediana)
      .limit(10)
      .collect()
)

df_ipca_2021
```






