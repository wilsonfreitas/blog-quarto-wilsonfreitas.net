{
  "hash": "bbd84a4d30ad870c5d2cf5a30de6cb7d",
  "result": {
    "markdown": "---\ntitle: \"Histórico de Taxas de Juros em Dólar no Brasil\"\ndescription: |\n  Foi analisado em um post recente a dinâmica das taxas de juros,\n  brasileira e americana.\n  Trago neste post a comparação entre as taxas de juros em dólar,\n  no Brasil e nos Estados Unidos.\nauthor:\n  - name: Wilson Freitas\n    url: {}\ndate: 2022-06-10\ncategories:\n  - R\n  - fixedincome\n  - rb3\n  - opendata\n---\n\n\n[1]: /posts/2022-06-09-histrico-de-taxas-de-juros-de-longo-prazo/index.html\n\nEm um [post][1] recente.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(Quandl)\n\nyc_all <- Quandl(\"USTREASURY/YIELD\")\n```\n:::\n\n::: {.cell hash='histrico-de-taxas-de-juros-em-dlar-no-brasil_cache/html/quandl-data-load_22ef20fd3fe98e7fb72c9f80a09a1ea8'}\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: xts\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: zoo\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'zoo'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rb3)\nlibrary(bizdays)\nlibrary(tidyverse)\nlibrary(fixedincome)\n```\n:::\n\n::: {.cell hash='histrico-de-taxas-de-juros-em-dlar-no-brasil_cache/html/rb3-data-load-usd_8360b0a9ad52067c246af795b9c06e86'}\n\n```{.r .cell-code}\ndusd <- yc_usd_mget(\n  first_date = \"2019-01-01\",\n  last_date = preceding(Sys.Date() - 1, \"Brazil/ANBIMA\"),\n  cache_folder = \"../../../rb3-data\"\n)\n```\n:::\n\n::: {.cell hash='histrico-de-taxas-de-juros-em-dlar-no-brasil_cache/html/create-curves-usd_42a3899b297da9173143587ad20f05e6'}\n\n```{.r .cell-code}\nunique(dusd$refdate) |> map(function(date, df) {\n  df_curve <- df |>\n    filter(refdate == date, cur_days > 0) |>\n    filter(!duplicated(cur_days))\n  curve <- spotratecurve(\n    df_curve$r_360,\n    df_curve$cur_days,\n    \"simple\", \"actual/360\", \"actual\",\n    refdate = date\n  )\n  interpolation(curve) <- interp_flatforward()\n  curve\n}, df = dusd) -> curves_usd\n```\n:::\n\n::: {.cell hash='histrico-de-taxas-de-juros-em-dlar-no-brasil_cache/html/create-historical-rates-usd_28daaeb1896d096b6589659d536e7926'}\n\n```{.r .cell-code}\ncurves_usd |>\n  map_dfr(\\(x) tibble(\n    refdate = x@refdate,\n    r_USD_br_10y = as.numeric(x[[3600]])\n  )) -> rates_usd_10y\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nyc_all |>\n  rename(refdate = \"Date\", r_USD_us_10y = `10 YR`) |>\n  left_join(rates_usd_10y, by = \"refdate\") |>\n  tidyr::pivot_longer(c(r_USD_br_10y, r_USD_us_10y),\n    names_to = \"rates\"\n  ) |>\n  ggplot(aes(x = refdate, y = value, colour = rates)) +\n  geom_line() +\n  labs(colour = NULL) +\n  theme(legend.position = \"bottom\") +\n  labs(\n    x = NULL, y = NULL,\n    title = \"Histórico de Taxas de Juros em Dólar de 10 Anos\",\n    subtitle = \"Estados Unidos (r_USD_us_10y) e Brasil (r_USD_br_10y)\",\n    caption = \"wilsonfreitas\"\n  ) +\n  scale_y_continuous(labels = scales::percent) +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 7256 rows containing missing values (`geom_line()`).\n```\n:::\n\n::: {.cell-output-display}\n![](histrico-de-taxas-de-juros-em-dlar-no-brasil_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}