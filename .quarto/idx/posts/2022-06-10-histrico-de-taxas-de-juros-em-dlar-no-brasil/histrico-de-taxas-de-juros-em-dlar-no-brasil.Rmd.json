{"title":"Histórico de Taxas de Juros em Dólar no Brasil","markdown":{"yaml":{"title":"Histórico de Taxas de Juros em Dólar no Brasil","description":"Foi analisado em um post recente a dinâmica das taxas de juros,\nbrasileira e americana.\nTrago neste post a comparação entre as taxas de juros em dólar,\nno Brasil e nos Estados Unidos.\n","author":[{"name":"Wilson Freitas","url":{}}],"date":"2022-06-10","categories":["R","fixedincome","rb3","opendata"]},"containsRefs":false,"markdown":"\n\n[1]: /posts/2022-06-09-histrico-de-taxas-de-juros-de-longo-prazo/index.html\n\nEm um [post][1] recente.\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE)\n```\n\n```{r get-data-fake, eval=FALSE}\nlibrary(Quandl)\n\nyc_all <- Quandl(\"USTREASURY/YIELD\")\n```\n\n```{r quandl-data-load, cache=TRUE, echo=FALSE}\nlibrary(Quandl)\n\nyc_all <- Quandl(\"USTREASURY/YIELD\", api_key = \"nJ1NhTYdEs2p3MsS4CVd\")\n```\n\n```{r load-package, message=FALSE, warning=FALSE}\nlibrary(rb3)\nlibrary(bizdays)\nlibrary(tidyverse)\nlibrary(fixedincome)\n```\n\n```{r rb3-data-load-usd, message=FALSE, cache=TRUE}\ndusd <- yc_usd_mget(\n  first_date = \"2019-01-01\",\n  last_date = preceding(Sys.Date() - 1, \"Brazil/ANBIMA\"),\n  cache_folder = \"../../../rb3-data\"\n)\n```\n\n```{r create-curves-usd, cache=TRUE, message=FALSE, warning=FALSE}\nunique(dusd$refdate) |> map(function(date, df) {\n  df_curve <- df |>\n    filter(refdate == date, cur_days > 0) |>\n    filter(!duplicated(cur_days))\n  curve <- spotratecurve(\n    df_curve$r_360,\n    df_curve$cur_days,\n    \"simple\", \"actual/360\", \"actual\",\n    refdate = date\n  )\n  interpolation(curve) <- interp_flatforward()\n  curve\n}, df = dusd) -> curves_usd\n```\n\n```{r create-historical-rates-usd, cache=TRUE}\ncurves_usd |>\n  map_dfr(\\(x) tibble(\n    refdate = x@refdate,\n    r_USD_br_10y = as.numeric(x[[3600]])\n  )) -> rates_usd_10y\n```\n\n\n```{r}\nyc_all |>\n  rename(refdate = \"Date\", r_USD_us_10y = `10 YR`) |>\n  left_join(rates_usd_10y, by = \"refdate\") |>\n  tidyr::pivot_longer(c(r_USD_br_10y, r_USD_us_10y),\n    names_to = \"rates\"\n  ) |>\n  ggplot(aes(x = refdate, y = value, colour = rates)) +\n  geom_line() +\n  labs(colour = NULL) +\n  theme(legend.position = \"bottom\") +\n  labs(\n    x = NULL, y = NULL,\n    title = \"Histórico de Taxas de Juros em Dólar de 10 Anos\",\n    subtitle = \"Estados Unidos (r_USD_us_10y) e Brasil (r_USD_br_10y)\",\n    caption = \"wilsonfreitas\"\n  ) +\n  scale_y_continuous(labels = scales::percent) +\n  theme(legend.position = \"bottom\")\n```"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"output-file":"histrico-de-taxas-de-juros-em-dlar-no-brasil.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.335","theme":"litera","title-block-banner":true,"title":"Histórico de Taxas de Juros em Dólar no Brasil","description":"Foi analisado em um post recente a dinâmica das taxas de juros,\nbrasileira e americana.\nTrago neste post a comparação entre as taxas de juros em dólar,\nno Brasil e nos Estados Unidos.\n","author":[{"name":"Wilson Freitas","url":{}}],"date":"2022-06-10","categories":["R","fixedincome","rb3","opendata"]},"extensions":{"book":{"multiFile":true}}}}}